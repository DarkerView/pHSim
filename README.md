# An Open Source pH Probe Simulator
pH measurement is a quirky and often frustrating technology. Usually working well, they can go wrong in so many ways. With dozens upon dozens of pH probes in service on the cultivation pads I have now spent a few years attempting to discover all of the ways a pH measurement can go bad.

A voltage generated by [ion exchange across a glass membrane](https://atlas-scientific.com/blog/how-does-a-ph-probe-work/) is the magic that makes a pH probe work, simply measure the voltage and you can measure the [hydrogen ion activity of a solution](https://en.wikipedia.org/wiki/PH). The result is a number from 0 to 14, with numbers less than seven being acid, and numbers above seven being basic. Most life, such as healthy algae require conditions close to 7, or neutral, too acid or too basic and everything dies.

While the [voltage generated by the movement of hydrogen ions](https://www.hamiltoncompany.com/process-analytics/ph-and-orp-knowledge/ph-probe-operation-principles) is reasonably large, plus or minus half a volt, it generates only a miniscule current, a few nanoamps. This tiny current makes pH a [challenge to measure](https://en.wikipedia.org/wiki/PH_meter), requiring careful circuitry design in the pH meter. The small current also makes the signal easy to disrupt, a corroded contact, a little salt in a connector, or a damaged cable and it so easily goes awry.

The issue is usually a bad probe, though sometimes it is not. Corroded connectors are a common issue around salt water. In one case I had a cheap, and noisy power supply corrupting the readings. The other issue I face is probes that cannot be removed from the bioreactors once the reactor is full of a thousand liters of saltwater and algae. Thus confirming a bad probe versus another issue is even more critical.

Another problem has popped up on me… When the cultivation folks attempt to re-calibrate a failing probe it can result in bad calibration values entered into the pH instrument even once the offending probe has been replaced. Most instruments do not provide a way to view or reset these bad values. The result is even stranger behavior of the system and a very confused operator, then an equally confused engineer who gets called out to fix it.

My answer to these issues was to make myself a pH simulator, a little box that simulates an ideal pH probe. The actual device is electrically very, very simple… Some voltage references and a few resistors to simulate the voltages of a good pH probe.

![pH Simulator model](/res/pHSim2-Oblique.png)

With this simulator I can disconnect the probe and test the pH meter separately, or recalibrate the instrument against an ideal simulated pH probe. The result is easy confirmation of a bad probe, a bad pH meter, or bad cabling. The simulator is also the ideal tool for testing or fixing a pH meter.

While the circuit design may be quite simple, it becomes a fun exercise to design a usable solution around it. First is to house the circuit in a rugged case that can withstand being thown in a toolbag or bounced off the concrete. This case is of course 3D printed from ABS plastic resulting in a solid housing that can take a bit of abuse. Add a proper printed circuit board and you have a neat solution that is pretty close to a commercial product.

Yes, commercially available pH simulators are out there, [for a thousand dollars](https://www.thomassci.com/Instruments/Electrodes-pH/_/pH-Simulator) or more. Aquaculture operations are quite often low budget startups, so low cost alternatives for useful tools make sense. Thus I am publishing the plans for the unit I originally designed and constructed for my own use.

I have chosen to release the device as a [Creative Commons non-commercial license CC BY-NC 4.0](/LICENSE.md), as this prohibits others from selling or profiting from the device but allows anyone to copy and use as long as they do not sell it for a profit.

As PCB’s are surprisingly cheap these days I have had a small stack of boards made and intend to give a few away to some folks I work with around [NELHA](https://nelha.hawaii.gov/). If you are interested in a PCB, or a kit of parts feel free to contact me.
